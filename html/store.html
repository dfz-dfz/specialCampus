<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>校园专场-店铺</title>
    <link rel="stylesheet" href="../css/public.css">
    <link rel="stylesheet" href="../css/store.css">
    <script>
        document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';
    </script>
</head>
<body>
    <div class="content">
        <section class="store_box">
            <!-- 头部信息 -->
            <div class="top">
                <img class="store_head_img" src="../images/image.jpg" alt="">
                <div class="middle_box">
                    <p class="store_name ellipsis_1">604尚书院（中山大学）</p>
                    <ul class="store_info">
                        <li><span class="icon_1"></span>到店自取</li>
                        <li><span class="icon_2"></span>配送8元起</li>
                        <li><span class="icon_3"></span>45252</li>
                    </ul>
                    <p class="business_hours">营业时间&nbsp;12:12:12</p>
                </div>
                <div class="btn link_btn"></div>
                <a href="javascript:history.back(-1)"><div class="btn close_btn"></div></a>
            </div>
            <!-- 头部信息 end -->

            <div class="main">
                <!-- 侧边导航 -->
                <ul class="left_nav">
                    <a  class="active" href="#list_1"><li>推荐</li></a>
                    <a href="#list_2"><li>饮料</li></a>
                    <a href="#list_3"><li>服饰</li></a>
                    <a href="#list_4"><li>小吃</li></a>
                    <a href="#"><li>零食</li></a>
                    <a href="#"><li>图书</li></a>
                    <a href="#"><li>衣服</li></a>
                    <a href="#"><li>配饰</li></a>
                    <a href="#"><li>牛奶</li></a>
                    <a href="#"><li>纸巾</li></a>
                    <a href="#"><li>纸巾</li></a>
                    <a href="#"><li>纸巾</li></a>
                    <a href="#"><li>纸巾</li></a>
                    <a href="#"><li>纸巾</li></a>
                </ul>
                <!-- 侧边导航 end -->
                
                <!-- 商品列表 -->
                <div class="right_box">
                    <!-- 搜索框 -->
                    <div class="input_box">
                        <form action="">
                            <input class="search" type="search">
                            <p class="placeholder">搜索本店商品</p>
                        </form>
                    </div>
                    <!-- 搜索框 end -->
                    <div class="shop_list">
                        <ul class="list_box recommend_list" id="list_1">
                            <p class="title"><span>精选推荐</span></p>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn hide"></span>
                                            <span class="num hide">0</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="choice_btn btn">选规格</span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <ul class="list_box drinks_list" id="list_2">
                            <p class="title"><span>饮料</span></p>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <ul class="list_box dress_list" id="list_3">
                            <p class="title"><span>服饰</span></p>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <ul class="list_box food_list" id="list_4">
                            <p class="title"><span>小吃</span></p>
                            <li>
                                <img class="shop_img" src="../images/image.jpg" alt="">
                                <div class="shop_right">
                                    <p class="shop_name ellipsis_1"><span>HOT</span>全套5册你不努力没人不努力</p>
                                    <div class="shop_info">
                                        <p class="shop_sale"><span>月售</span>522</p>
                                        <p class="shop_like"><span>喜欢</span>522</p>
                                    </div>
                                    <div class="price_box">
                                        <div class="left">
                                            <p class="price"><span>¥</span>16.00</p>
                                            <p class="price_original">¥18.00</p>
                                        </div>
                                        <div class="right">
                                            <span class="minus btn"></span>
                                            <span class="num">1</span>
                                            <span class="add btn"></span>
                                        </div>
                                    </div>
                                    <div class="label_box">
                                        <p class="label">赠券</p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- 商品列表 end -->
            </div>
        </section>
    
        <footer class="store_footer"><!-- 暂停营业加上 no_business 这个class  -->
            <div class="cart active">
                <span class="img"></span>
                <span class="shop_num">4</span>
            </div>
            <div class="total_price_box">
                <div class="total_price">
                    <span>总计：¥</span>
                    <span class="price">2120.00</span>
                </div>
                <div class="carriage">跑腿费：¥12.00</div>
            </div>
            <a href="./order_confirm.html"><div class="submit_btn">去结算<span></span></div></a>
            <!-- 暂停营业 -->
            <div class="submit_btn hide">暂停营业</div>
            <!-- 暂停营业 end -->
        </footer>
    </div>
</body>

<!-- 选规格弹窗 -->
<div class="popup_box choice_popup hide">
    <div class="masked"></div>
    <div class="choice_box">
        <span class="close"></span>
        <div class="head">
            <img src="../images/image.jpg" alt="">
            <div class="head_right">
                <p class="price"><span>¥</span>12.00</p>
                <p class="num">编号：12332223322</p>
            </div>
        </div>
        <div class="specifications">
            <p class="title">规格</p>
            <div class="lable_box">
                <ul>
                    <li class="active">全套12册装</li>
                    <li>单本书籍</li>
                    <li>强者成功法则/狼道</li>
                </ul>
            </div>
        </div>
        <div class="bottom_box">
            <p class="type">数量</p>
            <div class="num_box">
                <span class="btn minus"></span>
                <span class="num">1</span>
                <span class="btn add"></span>
            </div>
        </div>
        <div class="submit">确定</div>
        <div class="submit no_shop">补货提醒</div>
    </div>
</div>
<!-- 选规格弹窗 end -->

<!-- 缺货提醒弹窗 -->
<div class="popup_box no_shop_popup hide">
    <div class="masked"></div>
    <div class="popup">
        <div class="content">
            <img src="../images/image.jpg" alt="">
            <div class="title">已把缺货商品提交给商家</div>
            <div class="text">预计一周内上架，敬请留意</div>
            <div class="submit">知道了</div>
        </div>
    </div>
</div>
<!-- 缺货提醒弹窗 end -->

<!-- 店铺信息弹窗 -->
<div class="popup_box store_message_popup hide">
    <div class="masked"></div>
    <div class="popup">
        <div class="content">
            <span class="close"></span>
            <img class="store_head" src="../images/image.jpg" alt="">
            <p class="store_name title ellipsis_1">604尚书书院（广州中山大学)...</p>
            <ul class="store_info">
                <li><span class="icon_1"></span>到店自取</li>
                <li><span class="icon_2"></span>配送8元起</li>
                <li><span class="icon_3"></span>45252</li>
            </ul>
            <div class="title">店铺公告</div>
            <p class="text">本店营业时间 12:12:12，特殊情况可以直接到我宿舍去找我，谢谢大家关照</p>
            <div class="title">优惠信息</div>
            <p class="text">折扣卷抵100%</p>
        </div>
    </div>
</div>
<!-- 店铺信息弹窗 end -->

<!-- 购物车弹窗 -->
<div class="popup_box cart_popup hide">
    <div class="masked"></div>
    <div class="content">
        <div class="top"><div class="delete"><span></span>清空购物车</div></div>
        <div class="cart_list">
            <div class="shop">
                <img src="../images/image.jpg" alt="">
                <div class="message">
                    <p class="name">励志书籍愿你历尽</p>
                    <div class="price"><span>¥</span><p class="num">21.00</p></div>
                </div>
                <div class="right">
                    <span class="minus btn"></span>
                    <span class="num">1</span>
                    <span class="add btn"></span>
                </div>
            </div>
            <div class="shop">
                <img src="../images/image.jpg" alt="">
                <div class="message">
                    <p class="name">励志书籍愿你历尽</p>
                    <div class="price"><span>¥</span><p class="num">21.00</p></div>
                </div>
                <div class="right">
                    <span class="minus btn"></span>
                    <span class="num">1</span>
                    <span class="add btn"></span>
                </div>
            </div>
            <div class="shop">
                <img src="../images/image.jpg" alt="">
                <div class="message">
                    <p class="name">励志书籍愿你历尽</p>
                    <div class="price"><span>¥</span><p class="num">21.00</p></div>
                </div>
                <div class="right">
                    <span class="minus btn"></span>
                    <span class="num">1</span>
                    <span class="add btn"></span>
                </div>
            </div>
            <div class="shop">
                <img src="../images/image.jpg" alt="">
                <div class="message">
                    <p class="name">励志书籍愿你历尽</p>
                    <div class="price"><span>¥</span><p class="num">21.00</p></div>
                </div>
                <div class="right">
                    <span class="minus btn"></span>
                    <span class="num">1</span>
                    <span class="add btn"></span>
                </div>
            </div>
            <div class="shop">
                <img src="../images/image.jpg" alt="">
                <div class="message">
                    <p class="name">励志书籍愿你历尽</p>
                    <div class="price"><span>¥</span><p class="num">21.00</p></div>
                </div>
                <div class="right">
                    <span class="minus btn"></span>
                    <span class="num">1</span>
                    <span class="add btn"></span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 购物车弹窗 end -->
<script src="../script/jquery.min.js"></script>
<script src="../script/public.js"></script>
<script>
    $(function(){
        
    })

    // 侧边导航控制
    $('.left_nav').on('click','a',function() {
        $(this).addClass('active').siblings().removeClass('active');
    });

    // 获取每个分类到顶部的距离
    var arrOffsetTop = [
        $('#list_1').offset().top,
        $('#list_2').offset().top,
        $('#list_3').offset().top,
        $('#list_4').offset().top
    ];

    // 获取每个分类的平均高度
    var fTotalHeight = 0;
    for(var i=0; i<$('.list_box').length; i++) {
        fTotalHeight += $('.list_box').eq(i).outerHeight();
    }
    var fAverageHeight = parseFloat(fTotalHeight/$('.list_box').length);

    // 滑动右边内容关联左边导航
    $('.right_box').scroll(function(){
        for(var i =0; i<$('.list_box').length; i++) {
            if($(this).scrollTop() > arrOffsetTop[i] - fAverageHeight) {
                $('.left_nav a').eq(i).addClass('active').siblings().removeClass('active');
            }
        }
    });

    // 搜索框控制
    $('.input_box .search').on('focus',function() {
        $('.placeholder').hide();
    })

    $('.input_box .search').on('blur',function() {
        if($(this).val() != '') {
            return;
        }
        $('.placeholder').show();
    })

    $('.placeholder').on('click',function() {
        $('.input_box .search').focus();
        $(this).hide();
    })

    // 商品数量加减
    $('.list_box li .right').on('click','.minus',function() {
        var nums = $(this).parent().find('.num').text();
        nums--;
        if(nums <= 0) {
            $(this).hide();
            $(this).parent().find('.num').hide();
        }
        $(this).parent().find('.num').text(nums);
        console.log(nums);
    });

    $('.list_box li .right').on('click','.add',function() {
        var nums = $(this).parent().find('.num').text();
        nums++;
        if(nums > 0) {
            $(this).parent().find('.minus').show();
            $(this).parent().find('.num').show();
        }
        $(this).parent().find('.num').text(nums);
        console.log(nums);
    });

    // 选规格
    $('.list_box li .right').on('click','.choice_btn',function() {
        $('.choice_popup').show();
    });

    // 选规格弹窗控制
    $('.choice_popup').on('click','.masked,.close,.submit',function() {
        if($(this).is('.submit')) {
            
        }
        if($(this).is('.no_shop')) {
            $('.no_shop_popup').show();
            return; 
        }
        $('.choice_popup').hide();
    })

    //弹窗规格选择
    $('.choice_popup .lable_box').on('click','li',function() {
        $(this).addClass('active').siblings().removeClass('active');
    })

    //无货提醒弹窗
    $('.no_shop_popup').on('click','.submit',function() {
        $('.no_shop_popup').hide();
    })

    //弹窗数量加减
    $('.choice_popup .num_box').on('click','.minus',function() {
        var nums = $(this).parent().find('.num').text();
        nums--;
        if(nums < 0) {
            return;
        }
        $(this).parent().find('.num').text(nums);
    });

    $('.choice_popup .num_box').on('click','.add',function() {
        var nums = $(this).parent().find('.num').text();
        nums++;
        if(nums > 0) {
            $(this).parent().find('.minus').show();
            $(this).parent().find('.num').show();
        }
        $(this).parent().find('.num').text(nums);
    });

    // 店铺信息弹窗
    $('.store_name').on('click',function() {
        $('.store_message_popup').show();
    })

    $('.store_message_popup').on('click','.close',function() {
        $('.store_message_popup').hide();
    })

    // 收藏按钮控制
    $('.link_btn').on('click',function() {
        $(this).toggleClass('active');
        if($(this).hasClass('active')) {
            tipsPopup('收藏成功，可在我的收藏里查看');
        }else {
            tipsPopup('已取消收藏');
        }
    })

    // 购物车弹窗清空购物车
    $('.cart_popup').on('click','.delete',function() {
        var deleteCart = function() {
            console.log(2);
        }
        choicePopup('是否清空购物车？','取消','确定','',deleteCart);
    });

    // 购物车弹窗商品加减
    $('.cart_popup .right').on('click','.minus',function() {
        var nums = $(this).parent().find('.num').text();
        nums--;
        if(nums < 0) {

            return;
        }
        $(this).parent().find('.num').text(nums);
    });

    $('.cart_popup .right').on('click','.add',function() {
        var nums = $(this).parent().find('.num').text();
        nums++;
        if(nums > 0) {
            $(this).parent().find('.minus').show();
            $(this).parent().find('.num').show();
        }
        $(this).parent().find('.num').text(nums);
    });

    // 购物车隐藏与显示
    $('.cart_popup').on('click','.masked',function() {
        $('.cart_popup').hide();
    })
    $('footer').on('click',function(e){
        $('.cart_popup').hide();
    })

    $('footer').on('click','.cart',function(e) {
        e.stopPropagation();
        $('.cart_popup').show();
    })
</script>
</html>